#import "./../template.typ": *

#show: project.with(
  theme: "project",
  course: "æ•°æ®è¦ç´ å¸‚åœº",
  title: "æœºå™¨å­¦ä¹ æ¨¡å‹äº¤æ˜“å®Œæ•´æµç¨‹",
  author: "é«˜æ–‡éŸ¬ é’±æ»¡äº® ç‹èŠ·ç‘œ",
  date: "2025-07-26",
  semester: "sp25"
)

= 1 #fakebold[é—®é¢˜æè¿°]

éšç€æœºå™¨å­¦ä¹ æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œæ•°æ®å·²æˆä¸ºæ¨åŠ¨AIæ¨¡å‹æ€§èƒ½æå‡çš„æ ¸å¿ƒè¦ç´ ã€‚ç„¶è€Œï¼Œå¦‚ä½•åœ¨ä¿è¯å…¬å¹³æ€§å’Œæ¿€åŠ±ç›¸å®¹æ€§çš„å‰æä¸‹ï¼Œæ„å»ºä¸€ä¸ªæœ‰æ•ˆçš„æ•°æ®äº¤æ˜“å¸‚åœºä»ç„¶æ˜¯ä¸€ä¸ªé‡è¦æŒ‘æˆ˜ã€‚æœ¬æ–‡ç ”ç©¶çš„æ ¸å¿ƒé—®é¢˜æ˜¯è®¾è®¡ä¸€ä¸ª#fakebold[åŒè¾¹æ•°æ®å¸‚åœº]ï¼ˆtwo-sided data marketï¼‰ï¼Œå…¶ä¸­ï¼š

- #fakebold[æ•°æ®å–å®¶]ï¼šæ‹¥æœ‰å„ç§ç‰¹å¾æ•°æ®çš„æä¾›è€…ï¼Œå¸Œæœ›é€šè¿‡å‡ºå”®æ•°æ®è·å¾—æ”¶ç›Š
- #fakebold[æ•°æ®ä¹°å®¶]ï¼šéœ€è¦æ•°æ®æ¥è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹ä»¥æå‡é¢„æµ‹ç²¾åº¦çš„ç”¨æˆ·

è¯¥å¸‚åœºé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜åŒ…æ‹¬ï¼š

1. #fakebold[å®šä»·æœºåˆ¶è®¾è®¡]ï¼šå¦‚ä½•ä¸ºä¸åŒè´¨é‡å’Œä»·å€¼çš„æ•°æ®åˆ¶å®šåˆç†ä»·æ ¼
2. #fakebold[æ¿€åŠ±ç›¸å®¹æ€§]ï¼šå¦‚ä½•ç¡®ä¿ä¹°å®¶è¯šå®æŠ¥å‘Šå…¶å¯¹æ•°æ®çš„çœŸå®ä¼°å€¼
3. #fakebold[å…¬å¹³æ”¶ç›Šåˆ†é…]ï¼šå¦‚ä½•æ ¹æ®ä¸åŒå–å®¶æ•°æ®çš„è¾¹é™…è´¡çŒ®å…¬å¹³åˆ†é…æ”¶ç›Š
4. #fakebold[æ•°æ®è´¨é‡æ§åˆ¶]ï¼šå¦‚ä½•é˜²æ­¢æ•°æ®å¤åˆ¶å’Œä½è´¨é‡æ•°æ®çš„æ¶æ„æŠ•æ”¾

æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªå®Œæ•´çš„å¸‚åœºæ¡†æ¶ï¼Œé€šè¿‡ç»“åˆæ‹å–ç†è®ºã€åšå¼ˆè®ºå’ŒShapleyå€¼ç†è®ºï¼Œè§£å†³äº†ä¸Šè¿°å…³é”®é—®é¢˜ã€‚

= 2 #fakebold[æ–‡ç« çš„æ•´ä½“æ€è·¯]

æ–‡ç« é‡‡ç”¨äº†ä¸€ä¸ª#fakebold[ä¸‰æ­¥éª¤çš„ç³»ç»Ÿæ€§æ–¹æ³•]æ¥æ„å»ºæ•°æ®å¸‚åœºï¼š

== 2.1 #fakebold[ç¬¬ä¸€æ­¥ï¼šè¯šå®æœºå™¨å­¦ä¹ æ¨¡å‹æ‹å–æœºåˆ¶]

åŸºäº#fakebold[Myersonæ‹å–ç†è®º]è®¾è®¡äº†ä¸€ä¸ªæ¿€åŠ±ç›¸å®¹çš„æ‹å–æœºåˆ¶ï¼š

- #fakebold[åˆ†é…å‡½æ•° AF\*]ï¼šæ ¹æ®ä¹°å®¶å‡ºä»·å†³å®šæ•°æ®è´¨é‡ã€‚å¦‚æœå‡ºä»·ä½äºå¸‚åœºå®šä»·ï¼Œåˆ™å¯¹æ•°æ®æ·»åŠ å™ªå£°è¿›è¡Œ"é™çº§"
- #fakebold[æ”¯ä»˜å‡½æ•° RF\*]ï¼šé‡‡ç”¨Myersonæ”¯ä»˜è§„åˆ™ $r_n = b_n dot G(b_n) - integral_0^(b_n) G(z) dif z$ï¼Œç¡®ä¿ä¹°å®¶è¯šå®å‡ºä»·æ˜¯å ä¼˜ç­–ç•¥

è¯¥æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡#fakebold[æ•°æ®è´¨é‡åˆ†çº§]æ¥å®ç°ä»·æ ¼æ­§è§†ï¼Œæ¿€åŠ±ä¹°å®¶è¯šå®æŠ¥å‘Šä¼°å€¼ã€‚

== 2.2 #fakebold[ç¬¬äºŒæ­¥ï¼šåŠ¨æ€å®šä»·ç®—æ³•]

ç”±äºå¸‚åœºç¯å¢ƒçš„ä¸ç¡®å®šæ€§ï¼Œé‡‡ç”¨äº†ä¸¤ç§åœ¨çº¿å­¦ä¹ ç®—æ³•è¿›è¡ŒåŠ¨æ€å®šä»·ï¼š

- #fakebold[MWUç®—æ³•]ï¼ˆMultiplicative Weights Updateï¼‰ï¼šå°†ä»·æ ¼ç©ºé—´ç¦»æ•£åŒ–ä¸ºå¤šä¸ª"ä¸“å®¶"ï¼Œé€šè¿‡ä¸“å®¶æƒé‡æ›´æ–°æœºåˆ¶å­¦ä¹ æœ€ä¼˜å®šä»·ç­–ç•¥
- #fakebold[UCBç®—æ³•]ï¼ˆUpper Confidence Boundï¼‰ï¼šåŸºäºç½®ä¿¡åŒºé—´çš„æ¢ç´¢-åˆ©ç”¨ç­–ç•¥ï¼Œå¹³è¡¡ä»·æ ¼æ¢ç´¢ä¸æ”¶ç›Šæœ€å¤§åŒ–

è¿™äº›ç®—æ³•èƒ½å¤Ÿåœ¨#fakebold[é›¶åæ‚”]ï¼ˆzero regretï¼‰çš„ç†è®ºä¿è¯ä¸‹ï¼Œé€æ­¥æ”¶æ•›åˆ°æœ€ä¼˜ä»·æ ¼ã€‚

== 2.3 #fakebold[ç¬¬ä¸‰æ­¥ï¼šåŸºäºShapleyå€¼çš„æ”¶ç›Šåˆ†é…]

ä¸ºäº†å…¬å¹³åˆ†é…å–å®¶æ”¶ç›Šï¼Œæ–‡ç« æå‡ºäº†#fakebold[é²æ£’Shapleyå€¼]æ–¹æ³•ï¼š

- #fakebold[æ ‡å‡†Shapleyå€¼]ï¼šè¡¡é‡æ¯ä¸ªå–å®¶æ•°æ®å¯¹æ¨¡å‹é¢„æµ‹ç²¾åº¦çš„è¾¹é™…è´¡çŒ®
- #fakebold[é²æ£’æ€§æ”¹è¿›]ï¼šé€šè¿‡ç›¸ä¼¼æ€§åº¦é‡å’ŒæŒ‡æ•°åŠ æƒï¼Œé˜²æ­¢æ•°æ®å¤åˆ¶æ”»å‡»ï¼Œç¡®ä¿åˆ†é…çš„å…¬å¹³æ€§

è¯¥æ–¹æ³•è§£å†³äº†ä¼ ç»ŸShapleyå€¼è®¡ç®—å¤æ‚åº¦é«˜å’Œå®¹æ˜“è¢«æ“çºµçš„é—®é¢˜ã€‚

= 3 #fakebold[å…³é”®å®šç†çš„æè¿°]

== 3.1 #fakebold[å®šç†5.1ï¼šçœŸå®æ€§ä¿è¯]

#fakebold[å®šç†é™ˆè¿°]ï¼šå¯¹äºåˆ†é…å‡½æ•° AF*ï¼Œå½“ä¸”ä»…å½“å‡è®¾1æˆç«‹æ—¶ï¼Œæ€§è´¨3.1ï¼ˆçœŸå®æ€§ï¼‰å¯ä»¥å®ç°ï¼Œæ­¤æ—¶ RF* ä¿è¯çœŸå®æ€§ã€‚

#fakebold[è¯æ˜æ€è·¯]ï¼š
è¿™æ˜¯Myersonæ”¯ä»˜å‡½æ•°çš„ç»å…¸ç»“æœã€‚è¯æ˜åˆ†ä¸ºä¸¤ä¸ªæ–¹å‘ï¼š

1. #fakebold[æ­£å‘]ï¼šå‡è®¾ä¹°å®¶çœŸå®å‡ºä»· $b_n = \mu_n$ï¼Œé€šè¿‡å•è°ƒæ€§æ¡ä»¶è¯æ˜åç¦»ç­–ç•¥ä¸ä¼šå¸¦æ¥æ›´é«˜æ”¶ç›Š
2. #fakebold[åå‘]ï¼šå¦‚æœæœºåˆ¶æ˜¯çœŸå®çš„ï¼Œåˆ™å¢åŠ çš„åˆ†é…ä¸èƒ½é™ä½å‡†ç¡®æ€§

å…³é”®åœ¨äºä¹°å®¶æ•ˆç”¨å‡½æ•°çš„è®¾è®¡ï¼Œå³ä¹°å®¶çš„æ•ˆç”¨ä»…æ¥è‡ªäºè·å¾—çš„ä¼°è®¡è´¨é‡ $Y_n$ï¼Œè€Œéç‰¹å®šçš„æ•°æ®é›†åˆ†é…ã€‚

== 3.2 #fakebold[å®šç†5.2ï¼šæ”¶ç›Šæœ€å¤§åŒ–]

#fakebold[å®šç†é™ˆè¿°]ï¼šè®¾å‡è®¾1ã€3ã€4æˆç«‹ï¼Œè®¾ $p_(n,n in [N])$ ä¸ºç®—æ³•1çš„è¾“å‡ºã€‚é€šè¿‡é€‰æ‹©ç®—æ³•è¶…å‚æ•° $epsilon = (L sqrt(N))^(-1)$ï¼Œ$delta = sqrt(log(abs(cal(B)_(upright("net"))(epsilon)))/N)$ï¼Œæ€»å¹³å‡åæ‚”æœ‰ç•Œä¸ºï¼š

$frac(1, N) bb(E)[cal(R)(N)] lt.eq C cal(B)_(upright("max")) sqrt(frac(log(cal(B)_(upright("max")) L sqrt(N)), N)) = O(sqrt(frac(log(N), N)))$

#fakebold[è¯æ˜æ€è·¯]ï¼š
1. é¦–å…ˆè¯æ˜å›ºå®šä»·æ ¼çš„åæ‚”ç•Œé™
2. åˆ©ç”¨MWUç®—æ³•çš„å½’çº³å…³ç³»å¼ï¼Œå»ºç«‹æƒé‡æ›´æ–°çš„é€’æ¨å…³ç³»
3. é€šè¿‡å¯¹æ•°ä¸ç­‰å¼å’Œæ³°å‹’å±•å¼€ï¼Œå¾—åˆ°æœŸæœ›æ”¶ç›Šçš„æ¸è¿‘ç•Œé™

è¯¥å®šç†è¯´æ˜ç®—æ³•1æ˜¯é›¶åæ‚”ç®—æ³•ï¼Œæ”¶ç›Šç•Œé™ä¸ç‰¹å¾æ•°é‡Mæ— å…³ã€‚

== 3.3 #fakebold[å®šç†5.3ï¼šæ”¶ç›Šåˆ†é…ä¸­çš„å…¬å¹³æ€§]

#fakebold[å®šç†é™ˆè¿°]ï¼šè®¾ $psi_(n,"shapley")$ ä¸ºæ»¡è¶³æ€§è´¨3.3ï¼ˆShapleyå…¬å¹³æ€§ï¼‰çš„å”¯ä¸€å‘é‡ã€‚å¯¹äºç®—æ³•2ï¼Œé€‰æ‹©è¶…å‚æ•° $K > (M log(2 slash delta)) slash (2 epsilon^2)$ï¼Œå…¶ä¸­ $delta, epsilon > 0$ï¼Œåˆ™ä»¥æ¦‚ç‡ $1 - delta$ï¼Œç®—æ³•2çš„è¾“å‡º $hat(psi)_n$ æ»¡è¶³ï¼š

$||psi_(n,"shapley") - hat(psi)_n||_("infinity") < epsilon$


#fakebold[è¯æ˜æ€è·¯]ï¼š
è¿™æ˜¯å¯¹Shapleyå€¼çš„ $epsilon$-è¿‘ä¼¼ã€‚è¯æ˜åŸºäºï¼š
1. å°†Shapleyå€¼è¡¨ç¤ºä¸ºæœŸæœ›å½¢å¼
2. åˆ©ç”¨æœ‰ç•Œæ”¯æ’‘å’Œç‹¬ç«‹æ€§ï¼Œåº”ç”¨Hoeffdingä¸ç­‰å¼
3. é€šè¿‡è”åˆç•Œé™æ§åˆ¶æ‰€æœ‰åæ ‡çš„è¯¯å·®

è¯¥å®šç†ç»™å‡ºäº†è®¡ç®—Shapleyå€¼çš„æœ‰é™æ ·æœ¬ä¿è¯ï¼Œä½¿å¾—å®é™…åº”ç”¨ä¸­å¯ä»¥é€šè¿‡æœ‰é™é‡‡æ ·è·å¾—ç†è®ºä¿è¯çš„è¿‘ä¼¼è§£ã€‚

== 3.4 #fakebold[å®šç†5.4ï¼šæŠ—å¤åˆ¶é²æ£’æ€§]

#fakebold[å®šç†é™ˆè¿°]ï¼šè®¾å‡è®¾2æˆç«‹ã€‚å¯¹äºç®—æ³•3ï¼Œé€‰æ‹©è¶…å‚æ•° $K >= (M log(2 slash delta)) slash (2(epsilon slash 3)^2)$ï¼Œ$lambda = log(2)$ï¼Œå…¶ä¸­ $delta, epsilon > 0$ï¼Œåˆ™ä»¥æ¦‚ç‡ $1 - delta$ï¼Œç®—æ³•3çš„è¾“å‡º $psi_n$ æ˜¯"$epsilon$-æŠ—å¤åˆ¶é²æ£’"çš„ï¼Œå³æ»¡è¶³æ€§è´¨3.4ï¼ˆæŠ—å¤åˆ¶é²æ£’æ€§ï¼‰ã€‚

#fakebold[è¯æ˜æ€è·¯]ï¼š
1. æ„é€ åŒ…å«å¤åˆ¶ç‰¹å¾çš„å¢å¹¿é›†åˆ $S^+$
2. è¯æ˜æŒ‡æ•°æƒ©ç½šå‡½æ•° $exp(-lambda sum_(j in [M] \\ {m}) cal("SM")(X_m, X_j))$ çš„é²æ£’æ€§æ¡ä»¶
3. åˆ©ç”¨ç›¸ä¼¼æ€§åº¦é‡çš„æ€§è´¨ï¼Œè¯æ˜å¤åˆ¶ç‰¹å¾ä¼šè¢«æŒ‡æ•°åŠ æƒæ˜¾è‘—é™æƒ

è¯¥å®šç†ç¡®ä¿äº†å³ä½¿å­˜åœ¨æ•°æ®å¤åˆ¶æ”»å‡»ï¼Œæ”¶ç›Šåˆ†é…ä»ç„¶ä¿æŒå…¬å¹³æ€§ã€‚

= 4 #fakebold[å®ç°çš„æ ¸å¿ƒç®—æ³•ä»‹ç»]

== 4.1 #fakebold[åŸºç¡€å¤ç°]

=== 4.1.1 #fakebold[main.py]

æ€»ä½“ç›®æ ‡ï¼š#fakebold[æ¨¡æ‹Ÿä¸€æ¬¡å®Œæ•´çš„æ•°æ®å¸‚åœºäº¤æ˜“æµç¨‹]ï¼ŒåŒ…æ‹¬ï¼š
+ å¸‚åœºå®šä»·(åŠ¨æ€æˆ–UCBå­¦ä¹ )
+ ä¹°å®¶è¯šå®å‡ºä»·
+ å¸‚åœºæ ¹æ®å‡ºä»·å†³å®šæ˜¯å¦é™å™ªå¹¶è®­ç»ƒæ¨¡å‹
+ è®¡ç®—ä¹°å®¶çš„æ”¶ç›Š(é¢„æµ‹ç²¾åº¦)
+ å¸‚åœºå‘ä¹°å®¶æ”¶å–è´¹ç”¨(åŸºäºMyersonå…¬å¼)
+ å¸‚åœºæ›´æ–°ä»·æ ¼æ¨¡å‹
+ ä½¿ç”¨Shapleyå€¼åˆ†é…å–å®¶æ”¶å…¥(å¸¦é²æ£’æ€§)
#figure[
#table(
  columns: 4,
  [æ­¥éª¤],
  [åŠŸèƒ½],
  [å¯¹åº”æ¨¡å—],
  [ç®€è¦è¯´æ˜],
  [0.æ•°æ®ç”Ÿæˆ],
  [ç”Ÿæˆå¸‚åœºæ•°æ®(ç‰¹å¾ X å’Œæ ‡ç­¾ Y)],
  [`generate_data`(from `rmse`)],
  [åˆ›å»ºæ¨¡æ‹Ÿè®­ç»ƒæ•°æ®ï¼Œç”¨äºæ”¶ç›Šè®¡ç®—å’Œæ¨¡å‹è¯„ä¼°],
  [1.å¸‚åœºå®šä»·],
  [åŠ¨æ€å®šä»·æˆ–UCBå®šä»·],
  [`choose_price()`(from `DynamicPricer`/`UCBPricer`)],
  [é€šè¿‡ä¸“å®¶æƒé‡é€‰æ‹©æœ€ä¼˜ä»·æ ¼],
  [2&3.ä¹°å®¶å‡ºä»·],
  [ä¹°å®¶æ ¹æ®å¸‚åœºå®šä»·å‡ºä»·],
  [æŒ‰ç…§ä¹°å®¶è¯šå®å‡ºä»·çš„å‡è®¾è¿›è¡Œæ¨¡æ‹Ÿè®¾å®šï¼Œä¸æ¶‰åŠå…·ä½“æ¨¡å—],
  [è®¾å®šä¹°å®¶çš„ä¼°å€¼å’Œå‡ºä»·],
  [4&5.æ¨¡å‹è®­ç»ƒ],
  [è®­ç»ƒæ¨¡å‹å¹¶è®¡ç®—é¢„æµ‹å¢ç›Š],
  [`get_prediction_gain()`(from `HonestAuction`)],
  [ä½¿ç”¨é™å™ªæ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œè®¡ç®—é¢„æµ‹ç²¾åº¦],
  [6.æ”¶ç›Šè®¡ç®—],
  [è®¡ç®—ä¹°å®¶æ”¶ç›Šå’Œå¸‚åœºæ”¶å…¥],
  [`calculate_revenue()`(from `HonestAuction`)],
  [åŸºäºMyersonæ”¯ä»˜è§„åˆ™è®¡ç®—ä¹°å®¶åº”ä»˜è´¹ç”¨],
  [7.ä»·æ ¼æ›´æ–°],
  [æ›´æ–°å¸‚åœºå®šä»·æ¨¡å‹],
  [`update_weights()`/`update_stats()`(from `DynamicPricer`/`UCBPricer`)],
  [ä½¿ç”¨åˆšè·å¾—çš„æ”¶å…¥æ›´æ–°ä¸“å®¶æƒé‡],
  [8.æ”¶å…¥åˆ†é…],
  [åˆ†é…å–å®¶æ”¶å…¥(Shapleyå€¼)],
  [`shapley_robust()`(from `RevenueDivider`)],
  [ä½¿ç”¨é²æ£’Shapleyå€¼æ–¹æ³•å¯¹å–å®¶è´¡çŒ®è¿›è¡Œå½’å› å’Œåˆ†é…æ”¶ç›Š]
)
  caption: main.py å„éƒ¨åˆ†å¯¹åº”æ¨¡å—ä¸€è§ˆ
]

=== 4.1.2 #fakebold[rmse.py]

è´Ÿè´£ä¸ºå¸‚åœºæä¾›æ•°æ®ç”Ÿæˆã€æ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹å¢ç›Šè®¡ç®—ã€æ”¶ç›Šè®¡ç®—ä¸åˆ†é…ç­‰åŠŸèƒ½ã€‚

==== 4.1.2.1. generate_data(M=10, T=100) æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨

è¾“å…¥å‚æ•°ï¼š

  - M: å–å®¶æ•°é‡ï¼ˆå³ç‰¹å¾ç»´åº¦æ•°ï¼‰

  - T: æ—¶é—´æ­¥é•¿æˆ–æ•°æ®æ ·æœ¬æ•°é‡

#blockx[
  æµç¨‹ï¼š

  + ç”Ÿæˆç‰¹å¾çŸ©é˜µ X âˆˆ â„^(MÃ—T)ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªå–å®¶çš„æ•°æ®ï¼›

  + ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º M çš„çœŸå®æƒé‡å‘é‡ true_weightsï¼›

  + ç”¨çº¿æ€§ç»„åˆ Y = true_weights Â· X + å™ªå£° ç”Ÿæˆç›®æ ‡å˜é‡ï¼›

  + å™ªå£°é¡¹æœä» ğ’©(0, 0.5)ï¼Œç”¨äºæ¨¡æ‹Ÿé¢„æµ‹è¯¯å·®ã€‚
]

è¾“å‡ºï¼š

  - X: æ‰€æœ‰å–å®¶çš„ç‰¹å¾æ•°æ®ï¼ˆäºŒç»´æ•°ç»„ï¼‰

  - Y: åˆæˆåçš„ç›®æ ‡å˜é‡ï¼ˆç”¨äºæ¨¡æ‹Ÿè®­ç»ƒ/è¯„ä»·ï¼‰

==== 4.1.2.2. ml_model = LinearRegression()

ä½œç”¨ï¼š

ç”¨æ¥æ‹Ÿåˆä» X åˆ° Y çš„é¢„æµ‹æ¨¡å‹ï¼Œç”¨äºæ¨¡æ‹Ÿå¸‚åœºåœ¨è·å–æ•°æ®åèƒ½æå‡é¢„æµ‹èƒ½åŠ›çš„åœºæ™¯ã€‚

#tip[è¯¥æ¨¡å‹åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä¼šç”¨äºè®¡ç®—â€œæŸä¸ªä»·æ ¼ä¸‹ï¼Œå¸‚åœºè´­ä¹°æŸäº›æ•°æ®åçš„é¢„æµ‹èƒ½åŠ›â€ï¼Œè¿›è€Œç”¨äºä¼°ç®—â€œæ”¶ç›Šâ€æˆ–â€œå¢ç›Šâ€ã€‚]

==== 4.1.2.3. gain_function_rmse(y_true, y_pred)
å¸‚åœºä¸­ç”¨äºè¡¡é‡é¢„æµ‹æ•ˆæœçš„ â€œæ•°æ®å¢ç›Šå‡½æ•°â€ï¼Œç”¨äºåæ˜ æ¨¡å‹è®­ç»ƒåçš„æ•ˆæœæ˜¯å¦æ›´ä¼˜ã€‚

#blockx[
  åŸç†ï¼š

  è®¡ç®— `RMSE(y_true, y_pred)`ï¼›

  å½’ä¸€åŒ–ä¸º `Normalized RMSE = RMSE` / `std(y_true)`ï¼›

  å¢ç›Šå‡½æ•°å®šä¹‰ä¸º `Gain = max(0, 1 - Normalized RMSE)`ï¼Œå–å€¼ âˆˆ [0, 1]ã€‚
]

æ„ä¹‰ï¼š
å½“æ¨¡å‹é¢„æµ‹æ•ˆæœè¶Šå¥½ï¼ŒRMSE è¶Šå°ï¼Œå¢ç›Šè¶Šå¤§ï¼›
å¢ç›Šè¶Šé«˜ â†’ æ•°æ®è¶Šæœ‰ä»·å€¼ â†’ æ”¶ç›Šè¶Šå¤§ã€‚

=== 4.1.3 #fakebold[HonestAuction.py]

å®ç°äº†è®ºæ–‡ä¸­çš„è¯šå®æ‹å–æœºåˆ¶ï¼ŒåŒ…æ‹¬åˆ†é…å‡½æ•° (AF\*) å’Œæ”¶ç›Šå‡½æ•° (RF\*)ã€‚

==== 4.1.3.1. åˆ†é…å‡½æ•°(\_allocation_function)

åŠŸèƒ½ï¼šæ ¹æ®ä¹°å®¶çš„å‡ºä»· b_n ä¸å¸‚åœºå®šä»· p_n çš„å·®å€¼ï¼Œå†³å®šæ˜¯å¦å¯¹æ•°æ®åŠ å…¥å™ªå£°ï¼Œä»è€Œâ€œé™çº§â€æ•°æ®è´¨é‡ã€‚

æœºåˆ¶æ¥æºï¼šè®ºæ–‡ Example 4.1 çš„ AF\* å®ç°ã€‚

#blockx[
åŠ å™ªé€»è¾‘ï¼š

- å¦‚æœ b_n >= p_nï¼Œä¹°å®¶å¯è·å¾—å®Œæ•´åŸå§‹æ•°æ®ï¼›

- å¦‚æœ b_n < p_nï¼Œå¯¹æ•°æ®åŠ ä¸Š ~ğ’©(0, ÏƒÂ²) å™ªå£°ï¼Œå…¶ä¸­ï¼š

```scss
Ïƒ âˆ (p_n - b_n) * noise_std
```
å³å‡ºä»·è¶Šä½ï¼Œæ•°æ®è¶Šå·®ï¼Œè¿™æ˜¯æ¿€åŠ±ä¹°å®¶è¯šå®å‡ºä»·çš„å…³é”®æœºåˆ¶ã€‚
]
==== 4.1.3.2. é¢„æµ‹å¢ç›Šå‡½æ•°(get_prediction_gain)
åŠŸèƒ½ï¼šè®­ç»ƒæ¨¡å‹å¹¶è®¡ç®—é¢„æµ‹ç»“æœä¸çœŸå®ç»“æœä¹‹é—´çš„ é¢„æµ‹å¢ç›Š Gã€‚

#blockx[
æµç¨‹ï¼š

ç”¨ `_allocation_function` å¾—é™çº§ç‰ˆ X_tildeï¼›

å°† X_tilde.T å’Œ Y å–‚ç»™ `ml_model`(éµå¾ª scikit-learn APIï¼Œå¦‚ LinearRegression)ï¼›

ç”¨ `gain_function(y_true, y_pred)` å¾—å¢ç›ŠæŒ‡æ ‡(å¦‚ 1 - RMSE)ã€‚
]

==== 4.1.3.3. æ”¶ç›Šå‡½æ•°(calculate_revenue)

æ ¸å¿ƒç®—æ³•ï¼šMyerson æ”¯ä»˜è§„åˆ™

$ r_n = b_n \u{00B7} G(b_n) - \u{222B}^(b_n)_0 G(z) d z $

å«ä¹‰ï¼š

- ç¬¬ä¸€é¡¹ $b_n \u{00B7} G(b_n)$ï¼šä¹°å®¶æ„¿æ„ä¸ºå½“å‰å¢ç›Šæ”¯ä»˜çš„é‡‘é¢ï¼›

- ç¬¬äºŒé¡¹ $\u{222B}^(b_n)_0 G(z) d z$ï¼šä¿¡æ¯ç§Ÿé‡‘ï¼Œç¡®ä¿æœºåˆ¶è¯šå®æ¿€åŠ±ï¼›

ä¸¤è€…ç›¸å‡å°±æ˜¯å¸‚åœºåº”æ”¶è´¹ç”¨ã€‚

æ•°å€¼å®ç°æ–¹æ³•ï¼š

#tip[
  è¿™é‡Œä¸€å¼€å§‹ç”¨çš„æ˜¯ scipy.integrate.quad è¿›è¡ŒåŒºé—´ç§¯åˆ†ï¼Œä½†è€é‡åˆ°è¾¾åˆ°æœ€å¤§æ¬¡æ•°é™åˆ¶åä»ç„¶æ— æ³•æ”¶æ•›çš„é—®é¢˜ã€‚

  åæ¥æ‰‹åŠ¨ä¼˜åŒ–æˆä½¿ç”¨ Simpson ç§¯åˆ†æ³•ï¼Œæ•°å€¼ç¨³å®šæ€§æ›´å¥½,ä¹Ÿæ²¡æœ‰å†æŠ¥é”™äº†ã€‚]

```python
z_vals = np.linspace(0, b_n, 100)
y_vals = [G(z) for z in z_vals]
integral = simpson(y_vals, z_vals)
```
=== 4.1.4 #fakebold[DynamicPricer.py]

è¯¥ç¨‹åºçš„ç›®çš„æ˜¯å®ç°åŠ¨æ€å®šä»·ç­–ç•¥ï¼š

åœ¨æ•°æ®å¸‚åœºä¸­ï¼Œæ ¹æ®æ‹å–åé¦ˆä¸æ–­è°ƒæ•´å¯¹ä»·æ ¼çš„â€œä¿¡å¿ƒâ€ï¼Œä»è€Œè‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜ä»·æ ¼ç‚¹ã€‚

==== 4.1.4.1 æ ¸å¿ƒç®—æ³•ï¼šMWUï¼ˆMultiplicative Weights Updateï¼‰ï¼š

ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š

+ å°†ä»·æ ¼ç©ºé—´ [min_price, max_price] ç¦»æ•£ä¸º num_experts ä¸ªä»·æ ¼ï¼ˆæ¯ä¸ªä»·æ ¼å¯¹åº”ä¸€ä¸ªâ€œä¸“å®¶â€ï¼‰ï¼›

+ åˆå§‹æ—¶ï¼Œæ¯ä¸ªä¸“å®¶æƒé‡è®¾ä¸º 1ï¼›

+ åœ¨æ¯ä¸€è½®äº¤æ˜“ä¸­ï¼š

  - æ ¹æ®ä¸“å®¶æƒé‡çš„å½’ä¸€åŒ–åˆ†å¸ƒï¼ŒéšæœºæŠ½å–ä¸€ä¸ªä»·æ ¼ p_nï¼ˆç›¸å½“äºè®©ä¸€ä¸ªä¸“å®¶å‡ºä¸»æ„ï¼‰ï¼›

  - å¾—åˆ°å¸‚åœºåé¦ˆï¼ˆé€šè¿‡ auction_mechanism å¾—åˆ°çš„æ”¶ç›Šï¼‰ï¼›

  - æ‰€æœ‰ä¸“å®¶æ ¹æ®åé¦ˆæ›´æ–°æƒé‡ï¼ˆæ”¶ç›Šè¶Šå¥½ï¼Œæƒé‡æ¶¨å¾—è¶Šå¤šï¼‰ï¼›

#fakebold[æ›´æ–°å…¬å¼ï¼š]

$ w_i^(n+1) \u{2261} w_i \u{00B7} (1+\u{03B4} \u{00B7} hat(g_i)) $

å…¶ä¸­ï¼Œ$hat(g_i)$ æ˜¯ä¸“å®¶ i çš„å½’ä¸€åŒ–è™šæ‹Ÿæ”¶ç›Šï¼Œ$\u{03B4}$ æ˜¯å­¦ä¹ ç‡ã€‚

=== 4.1.5 #fakebold[RevenueDriver.py]

å®ç°äº†ä¸€ä¸ª åŸºäº Shapley å€¼çš„æ”¶ç›Šåˆ†é…ç³»ç»Ÿï¼Œç”¨äºè¡¡é‡å’Œåˆ†é…å¤šä¸ªâ€œå–å®¶â€æˆ–â€œç‰¹å¾æä¾›è€…â€åœ¨ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ä¸­æ‰€åšå‡ºçš„è¾¹é™…è´¡çŒ®ã€‚


== 4.2 #fakebold[è¿›é˜¶åŠŸèƒ½]

=== 4.2.1 #fakebold[UCBPricer.py]

=== 4.2.2 #fakebold[Security.py]

= 5 #fakebold[å®éªŒç»“æœä¸åˆ†æ]

== 5.1 #fakebold[åŸºç¡€å¤ç°]
== 5.1.1 #fakebold[å®éªŒç»“æœ]
#image("images/Dynamic.png")
== 5.1.2 #fakebold[å®éªŒåˆ†æ]

æŒ‰ç…§å›¾ç¤ºæ­¥éª¤æ¨¡æ‹Ÿäº†æœºå™¨å­¦ä¹ å¸‚åœºæ¨¡å‹äº¤æ˜“å®Œæ•´æµç¨‹ã€‚

== 5.2 #fakebold[æ›´å¤šçš„å®šä»·ç®—æ³•]
== 5.2.1 #fakebold[å®éªŒç»“æœ]
#image("images/UCB.png")
== 5.2.2 #fakebold[å®éªŒåˆ†æ]

== 5.3 #fakebold[éšç§è®¡ç®—]
== 5.3.1 #fakebold[å®éªŒç»“æœ]
#image("images/ZKP.png")
#image("images/ZKP2.png")
== 5.3.2 #fakebold[å®éªŒåˆ†æ]